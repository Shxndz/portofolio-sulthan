<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Sederhana</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .calculator-btn {
            transition: all 0.2s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .calculator-btn:active {
            transform: scale(0.95);
        }
        .display {
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }
        .operator-btn {
            background-color: #f59e0b;
            color: white;
        }
        .operator-btn:hover {
            background-color: #d97706;
        }
        .equals-btn {
            background-color: #10b981;
            color: white;
        }
        .equals-btn:hover {
            background-color: #059669;
        }
        .clear-btn {
            background-color: #ef4444;
            color: white;
        }
        .clear-btn:hover {
            background-color: #dc2626;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen flex items-center justify-center p-4">
    <div class="calculator-container w-full max-w-md">
        <div class="bg-white rounded-2xl overflow-hidden shadow-xl">
            <!-- Display -->
            <div class="display bg-gray-800 p-5 text-right">
                <div id="previous-operand" class="text-gray-400 text-xl h-6 overflow-hidden"></div>
                <div id="current-operand" class="text-white text-4xl font-semibold mt-2 overflow-x-auto whitespace-nowrap"></div>
            </div>
            
            <!-- Buttons -->
            <div class="grid grid-cols-4 gap-1 bg-gray-200 p-3">
                <!-- Row 1 -->
                <button onclick="clearAll()" class="clear-btn calculator-btn col-span-2 bg-red-500 hover:bg-red-600 text-white font-bold py-4 rounded-lg flex items-center justify-center">
                    <i class="fas fa-undo-alt mr-2"></i> AC
                </button>
                <button onclick="deleteLastChar()" class="calculator-btn bg-gray-300 hover:bg-gray-400 font-bold py-4 rounded-lg">
                    <i class="fas fa-backspace"></i>
                </button>
                <button onclick="appendOperator('/')" class="operator-btn calculator-btn font-bold py-4 rounded-lg">
                    <i class="fas fa-divide"></i>
                </button>
                
                <!-- Row 2 -->
                <button onclick="appendNumber('7')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    7
                </button>
                <button onclick="appendNumber('8')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    8
                </button>
                <button onclick="appendNumber('9')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    9
                </button>
                <button onclick="appendOperator('*')" class="operator-btn calculator-btn font-bold py-4 rounded-lg">
                    <i class="fas fa-times"></i>
                </button>
                
                <!-- Row 3 -->
                <button onclick="appendNumber('4')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    4
                </button>
                <button onclick="appendNumber('5')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    5
                </button>
                <button onclick="appendNumber('6')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    6
                </button>
                <button onclick="appendOperator('-')" class="operator-btn calculator-btn font-bold py-4 rounded-lg">
                    <i class="fas fa-minus"></i>
                </button>
                
                <!-- Row 4 -->
                <button onclick="appendNumber('1')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    1
                </button>
                <button onclick="appendNumber('2')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    2
                </button>
                <button onclick="appendNumber('3')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    3
                </button>
                <button onclick="appendOperator('+')" class="operator-btn calculator-btn font-bold py-4 rounded-lg">
                    <i class="fas fa-plus"></i>
                </button>
                
                <!-- Row 5 -->
                <button onclick="appendNumber('0')" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl col-span-2">
                    0
                </button>
                <button onclick="appendDecimal()" class="calculator-btn bg-white hover:bg-gray-100 font-bold py-4 rounded-lg text-xl">
                    .
                </button>
                <button onclick="calculate()" class="equals-btn calculator-btn font-bold py-4 rounded-lg">
                    <i class="fas fa-equals"></i>
                </button>
            </div>
        </div>
        
        <!-- History Section -->
        <div class="mt-6 bg-white rounded-xl shadow-md p-4 max-h-40 overflow-y-auto">
            <h3 class="text-lg font-semibold text-gray-700 mb-2 flex items-center">
                <i class="fas fa-history mr-2"></i> Riwayat Perhitungan
            </h3>
            <ul id="calculation-history" class="text-gray-600 divide-y divide-gray-200">
                <!-- History items will be added here -->
            </ul>
        </div>
    </div>

    <script>
        let currentOperand = '';
        let previousOperand = '';
        let operation = undefined;
        let calculationHistory = [];
        
        const currentOperandElement = document.getElementById('current-operand');
        const previousOperandElement = document.getElementById('previous-operand');
        const historyElement = document.getElementById('calculation-history');
        
        function updateDisplay() {
            currentOperandElement.innerText = currentOperand;
            if (operation != null) {
                previousOperandElement.innerText = `${previousOperand} ${operation}`;
            } else {
                previousOperandElement.innerText = previousOperand;
            }
        }
        
        function appendNumber(number) {
            if (number === '0' && currentOperand === '0') return;
            currentOperand = currentOperand.toString() + number.toString();
            updateDisplay();
        }
        
        function appendDecimal() {
            if (currentOperand.includes('.')) return;
            if (currentOperand === '') {
                currentOperand = '0';
            }
            currentOperand += '.';
            updateDisplay();
        }
        
        function appendOperator(op) {
            if (currentOperand === '' && previousOperand === '') return;
            if (currentOperand === '' && previousOperand !== '') {
                operation = op;
                updateDisplay();
                return;
            }
            if (previousOperand !== '') {
                calculate();
            }
            operation = op;
            previousOperand = currentOperand;
            currentOperand = '';
            updateDisplay();
        }
        
        function calculate() {
            let computation;
            const prev = parseFloat(previousOperand);
            const current = parseFloat(currentOperand);
            
            if (isNaN(prev) || isNaN(current)) return;
            
            switch (operation) {
                case '+':
                    computation = prev + current;
                    break;
                case '-':
                    computation = prev - current;
                    break;
                case '*':
                    computation = prev * current;
                    break;
                case '/':
                    computation = prev / current;
                    break;
                default:
                    return;
            }
            
            // Add to history
            const historyItem = `${previousOperand} ${operation} ${currentOperand} = ${computation}`;
            calculationHistory.unshift(historyItem);
            if (calculationHistory.length > 5) {
                calculationHistory.pop();
            }
            updateHistory();
            
            currentOperand = computation.toString();
            operation = undefined;
            previousOperand = '';
            updateDisplay();
        }
        
        function clearAll() {
            currentOperand = '';
            previousOperand = '';
            operation = undefined;
            updateDisplay();
        }
        
        function deleteLastChar() {
            currentOperand = currentOperand.toString().slice(0, -1);
            updateDisplay();
        }
        
        function updateHistory() {
            historyElement.innerHTML = '';
            calculationHistory.forEach(item => {
                const li = document.createElement('li');
                li.className = 'py-1 text-sm';
                li.textContent = item;
                historyElement.appendChild(li);
            });
        }
        
        // Keyboard support
        document.addEventListener('keydown', function(event) {
            if (/[0-9]/.test(event.key)) {
                appendNumber(event.key);
            } else if (event.key === '.') {
                appendDecimal();
            } else if (event.key === '+' || event.key === '-' || event.key === '*' || event.key === '/') {
                appendOperator(event.key);
            } else if (event.key === 'Enter' || event.key === '=') {
                event.preventDefault();
                calculate();
            } else if (event.key === 'Escape') {
                clearAll();
            } else if (event.key === 'Backspace') {
                deleteLastChar();
            }
        });
        
        // Initial display
        updateDisplay();
    </script>
</body>
</html>